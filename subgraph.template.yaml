specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: PotFactory
    network: {{ network }}
    source:
      address: "{{ address }}"
      abi: PotFactory
      startBlock: {{ startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AdminChanged
        - BeraFeeChanged
        - BerallyPassesAddressChanged
        - DefaultFundraisingPeriodChanged
        - DefaultLockingPeriodChanged
        - ManagerExitFeeChanged
        - MaxCapacityPerPotChanged
        - MaxPerformanceFeeChanged
        - MaximumSupportedAssetCountChanged
        - MinInvestmentAmountChanged
        - OwnershipTransferred
        - Paused
        - PotCreated
        - PotImplementationChanged
        - ProtocolExitFeeChanged
        - TokenAdded
        - TokenRemoved
        - TreasuryChanged
        - Unpaused
        - UsdTokenChanged
        - VolumeFeeChanged
      abis:
        - name: PotFactory
          file: ./abis/PotFactory.json
      eventHandlers:
        - event: AdminChanged(indexed address)
          handler: handleAdminChanged
        - event: BeraFeeChanged(uint256)
          handler: handleBeraFeeChanged
        - event: BerallyPassesAddressChanged(indexed address)
          handler: handleBerallyPassesAddressChanged
        - event: DefaultFundraisingPeriodChanged(uint256)
          handler: handleDefaultFundraisingPeriodChanged
        - event: DefaultLockingPeriodChanged(uint256)
          handler: handleDefaultLockingPeriodChanged
        - event: ManagerExitFeeChanged(uint256,uint256)
          handler: handleManagerExitFeeChanged
        - event: MaxCapacityPerPotChanged(uint256)
          handler: handleMaxCapacityPerPotChanged
        - event: MaxPerformanceFeeChanged(uint256)
          handler: handleMaxPerformanceFeeChanged
        - event: MaximumSupportedAssetCountChanged(uint256)
          handler: handleMaximumSupportedAssetCountChanged
        - event: MinInvestmentAmountChanged(uint256)
          handler: handleMinInvestmentAmountChanged
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: Paused(address)
          handler: handlePaused
        - event: PotCreated(indexed address,indexed address,uint256,uint256,uint256,indexed
            address,uint256,uint256)
          handler: handlePotCreated
        - event: PotImplementationChanged(indexed address)
          handler: handlePotImplementationChanged
        - event: ProtocolExitFeeChanged(uint256,uint256)
          handler: handleProtocolExitFeeChanged
        - event: TokenAdded(address)
          handler: handleTokenAdded
        - event: TokenRemoved(address)
          handler: handleTokenRemoved
        - event: TreasuryChanged(indexed address)
          handler: handleTreasuryChanged
        - event: Unpaused(address)
          handler: handleUnpaused
        - event: UsdTokenChanged(indexed address)
          handler: handleUsdTokenChanged
        - event: VolumeFeeChanged(uint256,uint256)
          handler: handleVolumeFeeChanged
      file: ./src/pot-factory.ts
  - kind: ethereum
    name: KodiakGuard
    network: {{ network }}
    source:
      address: "{{ kodiakGuard }}"
      abi: KodiakGuard
      startBlock: {{ startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ExchangeFrom
        - ExchangeTo
      abis:
        - name: KodiakGuard
          file: ./abis/KodiakGuard.json
      eventHandlers:
        - event: ExchangeFrom(address,address,address,uint256,address)
          handler: handleExchangeFrom
        - event: ExchangeTo(address,address,address,address,uint256)
          handler: handleExchangeTo
      file: ./src/kodiak-guard.ts
  - kind: ethereum
    name: ERC20Guard
    network: {{ network }}
    source:
      address: "{{ erc20Guard }}"
      abi: ERC20Guard
      startBlock: {{ startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ERC20Approval
      abis:
        - name: ERC20Guard
          file: ./abis/ERC20Guard.json
      eventHandlers:
        - event: ERC20Approval(address,address,address,uint256)
          handler: handleERC20Approval
      file: ./src/erc-20-guard.ts
templates:
  - kind: ethereum
    name: Pot
    network: {{network}}
    source:
      abi: Pot
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Approval
        - AssetAdded
        - AssetRemoved
        - Canceled
        - Claimed
        - Deposited
        - Executed
        - FundraisingClosed
        - PotInitialized
        - Transfer
        - Withdrawn
      abis:
        - name: Pot
          file: ./abis/Pot.json
      eventHandlers:
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: AssetAdded(indexed address,address)
          handler: handleAssetAdded
        - event: AssetRemoved(address,address)
          handler: handleAssetRemoved
        - event: Canceled(indexed address,uint256,uint256)
          handler: handleCanceled
        - event: Claimed(indexed address,indexed address,uint256,address,uint256)
          handler: handleClaimed
        - event: Deposited(indexed address,indexed address,address,uint256,uint256)
          handler: handleDeposited
        - event: Executed(indexed address,address,uint16)
          handler: handleExecuted
        - event: FundraisingClosed(indexed address,uint256,uint256,uint256,uint256)
          handler: handleFundraisingClosed
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Withdrawn(indexed address,uint256,uint256,indexed
            address,uint256,uint256,(address,uint256,uint256,uint256,uint256)[])
          handler: handleWithdrawn
      file: ./src/pot.ts
